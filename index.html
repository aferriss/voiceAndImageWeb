<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>New Project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" href="/built/css/main.css"> -->
    <style>
      body{
        padding: 0px;
        margin: 0px;

      }
</style>
  </head>
  <body>
    <div id="container"></div>
  </body>

  <script id="fragShader" type="x-shader/x-fragment">
      varying vec2 vUv;
      varying float w;
      uniform sampler2D tex;
      const float LOG2 = 1.442695;

      float luma(vec3 rgb){
          const vec3 W = vec3(0.2125, 0.7154, 0.0721);
          return dot(rgb, W);
      }


      vec3 rgb2hsv(vec3 c)
      {
          vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
          vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
          vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
          
          float d = q.x - min(q.w, q.y);
          float e = 1.0e-10;
          return vec3(abs(( (q.z + (q.w - q.y) / (6.0 * d + e))) ), d / (q.x + e), q.x);
      }

      float LinearizeDepth(float zoverw){
        float n = 0.1; // camera z near
        float f = 10000.0; // camera z far
        return (2.0 * n) / (f + n - zoverw * (f - n));
      }

      float thresh(vec3 col, float threshold){
        float bright = luma(col);
        float b = mix(0.0, 1.0, smoothstep(threshold-0.01, threshold+0.01, bright));
        return b;
      }

      vec3 crosshatch(vec3 texColor, float t1, float t2, float t3, float t4) {
  float lum = luma(texColor);
  vec3 color = vec3(1.0);
  if (lum < t1) {
      if (mod(gl_FragCoord.x + gl_FragCoord.y, 5.0) == 0.0) {
          color = vec3(0.0);
      }
  }
  if (lum < t2) {
      if (mod(gl_FragCoord.x - gl_FragCoord.y, 5.0) == 0.0) {
          color = vec3(0.0);
      }
  }
  if (lum < t3) {
      if (mod(gl_FragCoord.x + gl_FragCoord.y - 2.5, 5.0) == 0.0) {
          color = vec3(0.0);
      }
  }
  if (lum < t4) {
      if (mod(gl_FragCoord.x - gl_FragCoord.y - 2.5, 5.0) == 0.0) {
          color = vec3(0.0);
      }
  }
  return color;
}


      void main() {
        float z = LinearizeDepth(gl_FragCoord.z);
        // z = clamp(z, 0.0,1.0);
        float f = 1.0 - z * z * LOG2;
        vec4 t = texture2D(tex, vUv);
        vec4 tempT = t;
        
        // float avg = dot(vec3(1.0), t.rgb)*0.3333;
        // if(avg>0.9){
        //   discard;
        // }
        // if(avg<0.1){
        //   discard;
        // }
        //  vec3 hsv = rgb2hsv(t.rgb);

        // float thr = thresh(t.rgb, 0.5);

        // if(hsv.b > 0.99 && thr > 0.9){
        //   discard;
        // }
        // t.rgb = mix(t.rgb, vec3(thr), thr);


        
        // vec3 hatch = crosshatch(tempT.rgb, 1.0,0.75,0.5,0.3);
        t = mix(vec4(1.0), vec4(vec3(t),1.0), f);
        gl_FragColor = t;
        // gl_FragColor.r = gl_FragCoord.z;
      }
  </script>

  <script id="vertexShader" type="x-shader/x-vertex">
      varying vec2 vUv;
      varying float w;
      // varying vec3 vecPos;
      // varying vec3 vecNormal;

      vec4 zoom = vec4(1.005,1.005,1.0,1.0);
      void main() {
        vUv = uv;
        // vecPos = (modelMatrix * vec4(position, 1.0)).xyz;
        // vecNormal = (modelMatrix * vec4(normal, 0.0)).xyz;
        gl_Position =  projectionMatrix * modelViewMatrix* vec4( position, 1.0 );
        w = gl_Position.w;

      }
  </script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
  <script type="text/javascript" src="lexer.js"></script>
  <script type="text/javascript" src="lexicon.js_"></script>
  <script type="text/javascript" src="POSTagger.js"></script>
  <script src="three.min.js"></script>
  <script src="OrbitControlsNew.js"></script>
  <script src="main.js"></script>
</html>